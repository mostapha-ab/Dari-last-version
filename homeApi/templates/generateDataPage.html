{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body style="font-family:sans-serif">
        <h1>Generation Data Page</h1>

        <button id="gnt-btn">Generate Data</button>
    </body>





    <script src="{% static 'js/names.js' %}"></script>
    <script>
        var cities = ['Marrakech', 'Fès', 'Chefchaouen', 'Essaouira', 'Tanger', 'Casablanca', 'Rabat', 'Meknès', 'Agadir', 'Ouarzazate', 'Asilah', 'Tétouan', 'Merzouga', 'El Jadida', 'Tinghir', 'Ifrane', 'Taroudant ', 'Larache', 'Aït Ben Haddou', 'Al Hoceïma', 'Oujda', 'Sidi Ifni', 'Azrou', 'Béni Mellal', 'Midelt', 'Safi', 'Taza', 'Martil', 'Oued Zem', 'Sefrou', 'Taourirt', 'Guercif', 'Tiflet', 'Ouazzane', 'Youssoufia', 'Ksar El-Kébir', 'Fnideq', 'Sidi Kacem', 'Saïdia', "M'diq", 'Tiznit', 'Moulay Idriss', 'Zerhoun', 'Guelmim', 'Mohammédia', 'Imlil', 'Nador', 'Berrchid', 'Settat', 'Berkane']
        var house_category = ['House', 'Appartement', 'Villa', 'Duplex']
        var transaction_choice = ['Vente', 'Location (Per Day)', 'Location (Per Month)']
        var rooms_choice = [2,4,5,6]
        var etage_choice = [2,3,5]
        var bedRoom_choice = [2,3,5]
        var surface_choice = [50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 390, 400, 410, 420, 430, 440, 450, 460, 470, 480, 490]
        var users_list_id = [23, 67, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544, 545, 546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 560, 561, 562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 586, 587, 588, 589, 590, 591, 592, 593, 594, 595, 596, 597, 598, 599, 600, 601, 602, 603, 604, 605, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 656, 657, 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 673, 674, 675, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 695, 696, 697, 698, 699, 700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711, 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799, 800, 801, 802, 803, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 816, 817, 818, 819, 820, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 831, 832, 833, 834, 835, 836, 837, 838, 839, 840, 841, 842, 843, 844, 845, 846, 847, 848, 849, 850, 851, 852, 853, 854, 855, 856, 857, 858, 859, 860, 861, 862, 863, 864, 865, 866, 867, 868, 869, 870, 871, 872]
        var j = 2000
        prices_list = []
        for (j ; j < 10000 ; j++){
            if (j % 10 == 0){
                prices_list.push(j)
            }
        }

        //> Function That Get Random number between 0 and n
        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }


        //> Function That Send Request To Create User
        var unsuccessfully_requests = 0
        function createUserRequest(username,user_email,user_password,user_city){
            var xhr = new XMLHttpRequest
            var url = `http://127.0.0.1:8000/home/api/generate/users/${username}/${user_email}/${user_password}/${user_city}`
            xhr.onload = function(){
                var server_response = xhr.response
                if (server_response == "User Created Succefully"){
                    console.log("user created :)")
                }
                else{
                    unsuccessfully_requests++
                    console.log(unsuccessfully_requests)
                }
            }
            xhr.open("GET",url)
            xhr.send()
        }
        

        //> Function That Create N number of Users
        function createUser(number_users){
            var i = 0
            for (i ; i < number_users ;  i++){
                var user_name = names[getRandomInt(names.length)].substring(0,15)
                var user_email = `${user_name}@gmail.com`
                var user_password = "mehdihyad"
                var user_city = cities[getRandomInt(cities.length)]
                createUserRequest(user_name,user_email,user_password,user_city)
            }
        }


        

        //> Function That Send Request To Create House Post Item
        function createHousePostRequest(pk,desc,cat,city,addresse,title,price,transaction,rooms,etage,bedRoom,toilettes,living_room,total_surface,elevator,balcony,air_conditioner,furnished,furniture,Heater,concierge,terrace,cuisine_equipee,securite,parking){
            var xhr = new XMLHttpRequest
            var url = `http://127.0.0.1:8000/home/api/generate/posts/${pk}/${desc}/${cat}/${city}/${addresse}/${title}/${price}/${transaction}/${rooms}/${etage}/${bedRoom}/${toilettes}/${living_room}/${total_surface}/${elevator}/${balcony}/${air_conditioner}/${furnished}/${furniture}/${Heater}/${concierge}/${terrace}/${cuisine_equipee}/${securite}/${parking}/`
            xhr.onload = function(){
                console.log(xhr.response)
            }
            xhr.open("GET",url)
            xhr.send()
        }



        //> Function That Create N number of House Post Item
        function createPost(number_post){
            var i = 0
            for (i ; i < number_post ;  i++){
                var pk = users_list_id[getRandomInt(users_list_id.length)]
                var desc = "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                var cat = house_category[getRandomInt(house_category.length)]
                var city = cities[getRandomInt(cities.length)]
                var addresse = "Hay Rahma Adrare"
                var price = prices_list[getRandomInt(prices_list.length)]
                var transaction = transaction_choice[getRandomInt(transaction_choice.length)]
                var rooms = rooms_choice[getRandomInt(rooms_choice.length)]
                var etage = etage_choice[getRandomInt(etage_choice.length)]
                var bedRoom = bedRoom_choice[getRandomInt(bedRoom_choice.length)]
                var toilettes = bedRoom_choice[getRandomInt(bedRoom_choice.length)]
                var living_room = etage_choice[getRandomInt(etage_choice.length)]
                var living_room = etage_choice[getRandomInt(etage_choice.length)]
                var total_surface = surface_choice[getRandomInt(surface_choice.length)]
                var elevator = "True"
                var balcony = "True"
                var air_conditioner = "True"
                var furnished = "True"
                var furniture = "True"
                var Heater = "True"
                var concierge = "True"
                var terrace = "True"
                var cuisine_equipee = "True"
                var securite = "True"
                var parking = "True"
                var title = `${cat} with ${total_surface} m2 in ${city} Hay Rahma Adrare`
                createHousePostRequest(pk,desc,cat,city,addresse,title,price,transaction,rooms,etage,bedRoom,toilettes,living_room,total_surface,elevator,balcony,air_conditioner,furnished,furniture,Heater,concierge,terrace,cuisine_equipee,securite,parking)
            }
        }


        //> Function That Take The User propmt number and start generate the amount n of house posts
        var generate_btn = document.getElementById("gnt-btn")
        generate_btn.addEventListener("click",function(){
            var number_post = parseInt(prompt("Enter The Number of Post to generate"))
            if (number_post > 0 && number_post <= 10){
                return createPost(number_post)
            }
        })

    </script>
</html>



<style>
    button#gnt-btn{
        width: 141px;
        height: 50px;
        left: 1092.59px;
        top: 73px;
        background: #4A3AFF;
        border-radius: 5px;
        border: none;
        color: white;
        font-size: 14px;
        line-height: 24px;
        color: #F2F2F2;
    }
</style>